import { getLocalUserInfo } from '../utils.js';
async function tryToGetStorage(client, id, storageType) {
    const byIdOrName = await client[storageType](id)
        .get()
        .catch(() => undefined);
    if (byIdOrName) {
        return {
            [storageType]: byIdOrName,
            [`${storageType}Client`]: client[storageType](byIdOrName.id),
        };
    }
    const info = await getLocalUserInfo();
    const byName = await client[storageType](`${info.username}/${id}`)
        .get()
        .catch(() => undefined);
    if (byName) {
        return {
            [storageType]: byName,
            [`${storageType}Client`]: client[storageType](byName.id),
        };
    }
    return null;
}
export async function tryToGetDataset(client, datasetId) {
    return tryToGetStorage(client, datasetId, 'dataset');
}
export async function tryToGetKeyValueStore(client, keyValueStoreId) {
    return tryToGetStorage(client, keyValueStoreId, 'keyValueStore');
}
//# sourceMappingURL=storages.js.map